{"version":3,"sources":["hoc/ProtectedRoute.js","utils/constants.js","images/header__logo.svg","components/Header.js","contexts/CurrentUserContext.js","components/Card.js","components/Loader.js","components/Main.js","components/Footer.js","components/PopupWithForm.js","hooks/useFormWithValidation.js","components/Login.js","components/Register.js","components/ImagePopup.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","components/AddPlacePopup.js","components/ConfirmDeleteCardPopup.js","components/InfoTooltip.js","utils/api.js","utils/auth.js","images/profile__avatar.jpg","components/App.js","index.js"],"names":["ProtectedRoute","Component","component","props","loggedIn","to","signIn","signUp","JWT","Header","setLoggedIn","data","path","useLocation","pathname","history","useHistory","useState","text","setText","url","setUrl","isActiveButtonMenu","setActiveButtonMenu","useEffect","setData","className","src","headerLogo","alt","onClick","email","push","localStorage","removeItem","type","CurrentUserContext","React","createContext","Card","card","onCardClick","onDeleteButtonClick","onCardLike","currentUser","useContext","isOwn","_id","owner","isLiked","likes","some","like","evt","stopPropagation","link","name","length","Loader","memo","Main","onEditProfile","onAddPlace","onEditAvatar","cards","avatar","about","map","Footer","PopupWithForm","title","buttonText","children","isOpen","onClose","onScreenClickClose","onSubmit","isValid","hasCloseButton","modalElement","document","getElementById","isAuthPopup","markupPopup","action","id","noValidate","disabled","ReactDOM","createPortal","useFormWithValidation","values","setValues","errors","setErrors","setIsValid","resetForm","useCallback","newValues","newErrors","newIsValid","handleInputChange","target","value","checked","validationMessage","closest","checkValidity","Login","onAuthorization","markup","onChange","placeholder","required","maxLength","password","preventDefault","Register","onRegistration","linkMarkup","ImagePopup","EditProfilePopup","onUpdateUser","minLength","EditAvatarPopup","onUpdateAvatar","AddPlacePopup","place","ConfirmDeleteCardPopup","onDeleteCard","InfoTooltip","isSuccessful","api","baseUrl","headers","this","_baseUrl","_headers","responce","ok","json","Error","status","statusText","fetch","method","_checkResponceStatus","console","error","Promise","all","getUserInfo","getInitialCards","initialData","allSettled","body","JSON","stringify","cardId","methodHTTP","authorization","auth","res","a","register","message","authorize","checkToken","token","Authorization","App","authorizedUserData","setAuthorizedUserData","isEditProfilePopupOpen","setEditProfilePopupOpen","isAddPlacePopupOpen","setAddPlacePopupOpen","isEditAvatarPopupOpen","setEditAvatarPopupOpen","isConfirmPopupOpen","setConfirmPopupOpen","isInfoTooltipPopup","setInfoTooltipPopup","isSuccessfulRegistration","setSuccessfulRegistration","selectedCard","setSelectedCard","setCards","removableCard","setRemovableCard","avatarImg","setCurrentUser","handleInfoTooltipOpen","closeAllPopups","handleScreenClickClose","classList","contains","handleUpdateUser","setUserInfo","handleUpdateAvatar","updateUserAvatar","handleCardLike","changeLikeCardStatus","newCard","newCards","currentCard","handleCardDelete","deleteCard","filter","handleAddPlaceSubmit","addCard","handleAuthorization","hasOwnProperty","setItem","handleRegistration","getItem","fetchData","getAllInitialData","dataArray","item","dataUser","dataCards","handleEscClickClose","key","addEventListener","removeEventListener","Provider","render","StrictMode","basename"],"mappings":"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","file":"static/js/main.d2366e9f.chunk.js","sourcesContent":["import React from 'react';\r\nimport { Route, Redirect } from 'react-router-dom';\r\n\r\nconst ProtectedRoute = ({ component: Component, ...props }) => (\r\n  <Route>\r\n    {props.loggedIn ? <Component {...props} /> : <Redirect to=\"/sign-in\" />}\r\n  </Route>\r\n);\r\n\r\nexport default ProtectedRoute;\r\n","export const signIn = '/sign-in';\r\nexport const signUp = '/sign-up';\r\nexport const JWT = 'jwt';\r\n","export default __webpack_public_path__ + \"static/media/header__logo.c2821b38.svg\";","import React, { useEffect, useState } from 'react';\r\nimport { Link, useHistory, useLocation } from 'react-router-dom';\r\nimport { JWT, signIn, signUp } from '../utils/constants.js';\r\nimport headerLogo from '../images/header__logo.svg';\r\n\r\nconst Header = ({ loggedIn, setLoggedIn, data }) => {\r\n  const { pathname: path } = useLocation();\r\n  const history = useHistory();\r\n  const [text, setText] = useState('');\r\n  const [url, setUrl] = useState('');\r\n  const [isActiveButtonMenu, setActiveButtonMenu] = useState(false);\r\n\r\n  const signOut = () => {\r\n    setLoggedIn(false);\r\n    history.push(signIn);\r\n    localStorage.removeItem(JWT);\r\n  };\r\n\r\n  const toggleButtonMenuState = () => {\r\n    setActiveButtonMenu(!isActiveButtonMenu);\r\n  };\r\n\r\n  useEffect(() => {\r\n    const setData = (path) => {\r\n      if (path === signIn) {\r\n        setText('Регистрация');\r\n        setUrl(signUp);\r\n      } else if (path === signUp) {\r\n        setText('Войти');\r\n        setUrl(signIn);\r\n      }\r\n    };\r\n\r\n    setData(path);\r\n  }, [path]);\r\n\r\n  return (\r\n    <header className=\"header\">\r\n      <img src={headerLogo} alt=\"Логотип Место\" className=\"header__logo\" />\r\n      <button className=\"header__button-menu\" onClick={toggleButtonMenuState}>\r\n        <span\r\n          className={`header__button-element ${\r\n            isActiveButtonMenu ? 'header__button-element_active' : ''\r\n          }`}\r\n        />\r\n      </button>\r\n      <ul\r\n        className={`header__list ${\r\n          isActiveButtonMenu ? 'header__list_opened' : ''\r\n        }`}\r\n      >\r\n        <li className=\"header__item\">\r\n          <p className=\"header__email\">\r\n            {loggedIn ? (data ? data.email : '') : ''}\r\n          </p>\r\n        </li>\r\n        <li className=\"header__item\">\r\n          {!loggedIn ? (\r\n            <Link to={url} className=\"header__link\">\r\n              {text}\r\n            </Link>\r\n          ) : (\r\n            <button\r\n              className=\"header__button-output\"\r\n              onClick={signOut}\r\n              type=\"button\"\r\n            >\r\n              Выйти\r\n            </button>\r\n          )}\r\n        </li>\r\n      </ul>\r\n    </header>\r\n  );\r\n};\r\n\r\nexport default Header;\r\n","import React from 'react';\r\n\r\nexport const CurrentUserContext = React.createContext();\r\n","import React from 'react';\r\nimport { CurrentUserContext } from './../contexts/CurrentUserContext';\r\n\r\nconst Card = function ({ card, onCardClick, onDeleteButtonClick, onCardLike }) {\r\n  const currentUser = React.useContext(CurrentUserContext);\r\n  const isOwn = currentUser._id === card.owner._id;\r\n  const isLiked = card.likes.some((like) => currentUser._id === like._id);\r\n\r\n  const handleClick = () => {\r\n    onCardClick(card);\r\n  };\r\n\r\n  const handleDeleteButtonClick = () => {\r\n    onDeleteButtonClick(card);\r\n  };\r\n\r\n  const handleLikeClick = () => {\r\n    onCardLike(card);\r\n  };\r\n\r\n  return (\r\n    <li className=\"elements__item\" onClick={handleClick}>\r\n      <button\r\n        className={`elements__delete-card ${\r\n          isOwn ? '' : 'elements__delete-card_hidden'\r\n        }`}\r\n        onClick={(evt) => {\r\n          evt.stopPropagation();\r\n          handleDeleteButtonClick();\r\n        }}\r\n      />\r\n      <img src={card.link} alt={card.name} className=\"elements__img\" />\r\n      <div className=\"elements__container\">\r\n        <h2 className=\"elements__title\">{card.name}</h2>\r\n        <div className=\"elements__group\">\r\n          <button\r\n            className={`elements__like-button ${\r\n              isLiked ? 'elements__like-button_active' : ''\r\n            }`}\r\n            onClick={(evt) => {\r\n              evt.stopPropagation();\r\n              handleLikeClick();\r\n            }}\r\n          />\r\n          <span className=\"elements__like-count\">{card.likes.length}</span>\r\n        </div>\r\n      </div>\r\n    </li>\r\n  );\r\n};\r\n\r\nexport default Card;\r\n","import React from 'react';\r\n\r\nconst Loader = React.memo(function () {\r\n  return <div className=\"animation animation_type_loader\"></div>;\r\n});\r\n\r\nexport default Loader;\r\n","import React, { useContext } from 'react';\r\nimport Card from './Card';\r\nimport { CurrentUserContext } from './../contexts/CurrentUserContext';\r\nimport Loader from '../components/Loader';\r\n\r\nconst Main = ({\r\n  onEditProfile,\r\n  onAddPlace,\r\n  onEditAvatar,\r\n  onCardClick,\r\n  onDeleteButtonClick,\r\n  cards,\r\n  onCardLike,\r\n}) => {\r\n  const currentUser = useContext(CurrentUserContext);\r\n\r\n  return (\r\n    <main className=\"content\">\r\n      <section className=\"profile content__profile\">\r\n        <div className=\"profile__avatar-container\">\r\n          <img\r\n            src={currentUser.avatar || ''}\r\n            alt={currentUser.name || ''}\r\n            className=\"profile__avatar\"\r\n          />\r\n          <button\r\n            className=\"profile__update-button\"\r\n            type=\"button\"\r\n            onClick={onEditAvatar}\r\n          />\r\n        </div>\r\n        <div className=\"profile__info\">\r\n          <h1 className=\"profile__title\">{currentUser.name || ''}</h1>\r\n          <button className=\"profile__edit-button\" onClick={onEditProfile} />\r\n          <p className=\"profile__subtitle\">{currentUser.about || ''}</p>\r\n        </div>\r\n        <button className=\"profile__add-button\" onClick={onAddPlace} />\r\n      </section>\r\n      <section className=\"elements content__elements\">\r\n        <ul className=\"elements__list\">\r\n          {cards.length > 0 ? (\r\n            cards.map((card) => {\r\n              return (\r\n                <Card\r\n                  card={card}\r\n                  onCardClick={onCardClick}\r\n                  onDeleteButtonClick={onDeleteButtonClick}\r\n                  onCardLike={onCardLike}\r\n                  key={card._id}\r\n                />\r\n              );\r\n            })\r\n          ) : (\r\n            <Loader />\r\n          )}\r\n        </ul>\r\n      </section>\r\n    </main>\r\n  );\r\n};\r\n\r\nexport default Main;\r\n","import React from 'react';\r\n\r\nconst Footer = function () {\r\n  return (\r\n    <footer className=\"footer page__footer\">\r\n      <p className=\"footer__copyright\">&copy; 2020 Mesto Russia</p>\r\n    </footer>\r\n  );\r\n};\r\n\r\nexport default Footer;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\n\r\nconst PopupWithForm = ({\r\n  title,\r\n  name,\r\n  buttonText,\r\n  children,\r\n  isOpen,\r\n  onClose,\r\n  onScreenClickClose,\r\n  onSubmit,\r\n  isValid,\r\n  link,\r\n  hasCloseButton = true,\r\n}) => {\r\n  const modalElement = document.getElementById('modal');\r\n\r\n  const isAuthPopup = name === 'register' || name === 'login';\r\n\r\n  const markupPopup = (\r\n    <section\r\n      className={`popup popup_type_${name} ${\r\n        isAuthPopup ? 'page__auth-popup' : ''\r\n      } ${isOpen ? 'popup_opened' : ''}`}\r\n      onClick={onScreenClickClose}\r\n    >\r\n      <div className=\"popup__wrapper\">\r\n        {hasCloseButton && (\r\n          <button\r\n            className=\"popup__close-button button\"\r\n            onClick={onClose}\r\n            type=\"button\"\r\n          />\r\n        )}\r\n        <form\r\n          action=\"#\"\r\n          id={name}\r\n          className={`popup__form ${\r\n            isAuthPopup ? 'popup__form_theme_dark' : ''\r\n          }`}\r\n          name={`popup-${name}`}\r\n          onSubmit={onSubmit}\r\n          noValidate\r\n        >\r\n          <h2\r\n            className={`popup__title ${\r\n              isAuthPopup ? 'popup__title_theme_dark' : ''\r\n            }`}\r\n          >\r\n            {title}\r\n          </h2>\r\n          {children}\r\n          <button\r\n            className={`popup__save-button ${\r\n              isAuthPopup ? 'popup__save-button_theme_dark' : ''\r\n            } button ${isValid ? '' : 'button_inactive'}`}\r\n            type=\"submit\"\r\n            disabled={!isValid}\r\n          >\r\n            {buttonText}\r\n          </button>\r\n          {link}\r\n        </form>\r\n      </div>\r\n    </section>\r\n  );\r\n\r\n  //Попапы регистрации и авторизации не вырываем из потока, остальные попапы имеют\r\n  //фиксированное позиционирование и отправляются в блок с модалками\r\n  return isAuthPopup\r\n    ? markupPopup\r\n    : ReactDOM.createPortal(markupPopup, modalElement);\r\n};\r\n\r\nexport default PopupWithForm;\r\n","import React, { useCallback, useState } from 'react';\r\n\r\nconst useFormWithValidation = () => {\r\n  const [values, setValues] = useState({});\r\n  const [errors, setErrors] = useState({});\r\n  const [isValid, setIsValid] = useState(false);\r\n\r\n  const handleInputChange = ({ target }) => {\r\n    const name = target.name;\r\n    const value = target.type === 'checkbox' ? target.checked : target.value;\r\n    setValues({ ...values, [name]: value });\r\n    setErrors({ ...errors, [name]: target.validationMessage });\r\n    setIsValid(target.closest('form').checkValidity());\r\n  };\r\n\r\n  const resetForm = useCallback(\r\n    (newValues = {}, newErrors = {}, newIsValid = false) => {\r\n      setValues(newValues);\r\n      setErrors(newErrors);\r\n      setIsValid(newIsValid);\r\n    },\r\n    [setValues, setErrors, setIsValid]\r\n  );\r\n\r\n  return { values, handleInputChange, errors, isValid, resetForm };\r\n};\r\n\r\nexport { useFormWithValidation };\r\n","import React from 'react';\r\nimport PopupWithForm from './PopupWithForm';\r\nimport { useFormWithValidation } from '../hooks/useFormWithValidation';\r\n\r\nconst Login = ({ onAuthorization }) => {\r\n  const {\r\n    values,\r\n    handleInputChange,\r\n    errors,\r\n    isValid,\r\n  } = useFormWithValidation();\r\n\r\n  const handleSubmit = (evt) => {\r\n    evt.preventDefault();\r\n\r\n    onAuthorization({\r\n      password: values.password,\r\n      email: values.email,\r\n    });\r\n  };\r\n\r\n  const markup = (\r\n    <fieldset className=\"popup__info\">\r\n      <label className=\"popup__form-field\">\r\n        <input\r\n          value={values.email || ''}\r\n          onChange={handleInputChange}\r\n          type=\"email\"\r\n          id=\"email-input\"\r\n          className=\"popup__input popup__input_theme_dark\"\r\n          name=\"email\"\r\n          placeholder=\"Email\"\r\n          required\r\n          maxLength=\"30\"\r\n        />\r\n        <span className=\"popup__error\" id=\"place-input-error\">\r\n          {errors.email || ''}\r\n        </span>\r\n      </label>\r\n      <label className=\"popup__form-field\">\r\n        <input\r\n          value={values.password || ''}\r\n          onChange={handleInputChange}\r\n          type=\"password\"\r\n          id=\"password-input\"\r\n          className=\"popup__input popup__input_theme_dark\"\r\n          name=\"password\"\r\n          placeholder=\"Пароль\"\r\n          required\r\n        />\r\n        <span className=\"popup__error\" id=\"link-input-error\">\r\n          {errors.password || ''}\r\n        </span>\r\n      </label>\r\n    </fieldset>\r\n  );\r\n\r\n  return (\r\n    <PopupWithForm\r\n      title={'Вход'}\r\n      name={'login'}\r\n      buttonText={'Войти'}\r\n      children={markup}\r\n      isOpen={true}\r\n      link={null}\r\n      hasCloseButton={false}\r\n      onClose={null}\r\n      onScreenClickClose={null}\r\n      onSubmit={handleSubmit}\r\n      isValid={isValid}\r\n    />\r\n  );\r\n};\r\n\r\nexport default Login;\r\n","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport PopupWithForm from './PopupWithForm';\r\nimport { useFormWithValidation } from '../hooks/useFormWithValidation';\r\nimport { signIn } from '../utils/constants';\r\n\r\nconst Register = ({ onRegistration }) => {\r\n  const {\r\n    values,\r\n    handleInputChange,\r\n    errors,\r\n    isValid,\r\n  } = useFormWithValidation();\r\n\r\n  const handleSubmit = (evt) => {\r\n    evt.preventDefault();\r\n\r\n    onRegistration({\r\n      password: values.password,\r\n      email: values.email,\r\n    });\r\n  };\r\n\r\n  const markup = (\r\n    <fieldset className=\"popup__info\">\r\n      <label className=\"popup__form-field\">\r\n        <input\r\n          value={values.email || ''}\r\n          onChange={handleInputChange}\r\n          type=\"email\"\r\n          id=\"email-input\"\r\n          className=\"popup__input popup__input_theme_dark\"\r\n          name=\"email\"\r\n          placeholder=\"Email\"\r\n          required\r\n          maxLength=\"30\"\r\n        />\r\n        <span className=\"popup__error\" id=\"place-input-error\">\r\n          {errors.email || ''}\r\n        </span>\r\n      </label>\r\n      <label className=\"popup__form-field\">\r\n        <input\r\n          value={values.password || ''}\r\n          onChange={handleInputChange}\r\n          type=\"password\"\r\n          id=\"password-input\"\r\n          className=\"popup__input popup__input_theme_dark\"\r\n          name=\"password\"\r\n          placeholder=\"Пароль\"\r\n          required\r\n        />\r\n        <span className=\"popup__error\" id=\"link-input-error\">\r\n          {errors.password || ''}\r\n        </span>\r\n      </label>\r\n    </fieldset>\r\n  );\r\n\r\n  const linkMarkup = (\r\n    <Link to={signIn} className=\"popup__link\">\r\n      Уже зарегистрированы? Войти\r\n    </Link>\r\n  );\r\n\r\n  return (\r\n    <PopupWithForm\r\n      title={'Регистрация'}\r\n      name={'register'}\r\n      buttonText={'Зарегистрироваться'}\r\n      children={markup}\r\n      isOpen={true}\r\n      link={linkMarkup}\r\n      hasCloseButton={false}\r\n      onClose={null}\r\n      onScreenClickClose={null}\r\n      onSubmit={handleSubmit}\r\n      isValid={isValid}\r\n    />\r\n  );\r\n};\r\n\r\nexport default Register;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\n\r\nconst ImagePopup = function ({ card, onClose, onScreenClickClose }) {\r\n  const modalElement = document.getElementById('modal');\r\n\r\n  return ReactDOM.createPortal(\r\n    <section\r\n      className={`popup popup_type_image ${card ? 'popup_opened' : ''}`}\r\n      onClick={onScreenClickClose}\r\n    >\r\n      <div className=\"popup__wrapper\">\r\n        <button\r\n          className={card && 'popup__close-button button'}\r\n          onClick={onClose}\r\n        />\r\n        <figure className=\"popup__img-container\">\r\n          <img\r\n            src={card && card.link}\r\n            alt={card && card.name}\r\n            className=\"popup__card-img\"\r\n          />\r\n          <figcaption className=\"popup__title-img\">\r\n            {card && card.name}\r\n          </figcaption>\r\n        </figure>\r\n      </div>\r\n    </section>,\r\n    modalElement\r\n  );\r\n};\r\n\r\nexport default ImagePopup;\r\n","import React, { useContext, useEffect } from 'react';\r\nimport PopupWithForm from './PopupWithForm';\r\nimport { CurrentUserContext } from './../contexts/CurrentUserContext';\r\nimport { useFormWithValidation } from './../hooks/useFormWithValidation';\r\n\r\nconst EditProfilePopup = ({\r\n  isOpen,\r\n  onClose,\r\n  onScreenClickClose,\r\n  onUpdateUser,\r\n}) => {\r\n  const currentUser = useContext(CurrentUserContext);\r\n  const {\r\n    values,\r\n    handleInputChange,\r\n    errors,\r\n    isValid,\r\n    resetForm,\r\n  } = useFormWithValidation();\r\n\r\n  useEffect(() => {\r\n    if (currentUser) {\r\n      resetForm(currentUser, {}, true);\r\n    }\r\n  }, [isOpen, currentUser, resetForm]);\r\n\r\n  const handleSubmit = (evt) => {\r\n    evt.preventDefault();\r\n\r\n    onUpdateUser({\r\n      name: values.name,\r\n      about: values.about,\r\n    });\r\n  };\r\n\r\n  const markup = (\r\n    <fieldset className=\"popup__info\">\r\n      <label className=\"popup__form-field\">\r\n        <input\r\n          type=\"text\"\r\n          id=\"name-input\"\r\n          className=\"popup__input\"\r\n          name=\"name\"\r\n          placeholder=\"Имя\"\r\n          required\r\n          minLength=\"2\"\r\n          maxLength=\"40\"\r\n          value={values.name || ''}\r\n          onChange={handleInputChange}\r\n        />\r\n        <span className=\"popup__error\" id=\"name-input-error\">\r\n          {errors.name || ''}\r\n        </span>\r\n      </label>\r\n      <label className=\"popup__form-field\">\r\n        <input\r\n          type=\"text\"\r\n          id=\"job-input\"\r\n          className=\"popup__input\"\r\n          name=\"about\"\r\n          placeholder=\"О себе\"\r\n          required\r\n          minLength=\"2\"\r\n          maxLength=\"200\"\r\n          value={values.about || ''}\r\n          onChange={handleInputChange}\r\n        />\r\n        <span className=\"popup__error\" id=\"job-input-error\">\r\n          {errors.about || ''}\r\n        </span>\r\n      </label>\r\n    </fieldset>\r\n  );\r\n\r\n  return (\r\n    <PopupWithForm\r\n      title={'Редактировать профиль'}\r\n      name={'profile'}\r\n      buttonText={'Сохранить'}\r\n      children={markup}\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n      onScreenClickClose={onScreenClickClose}\r\n      onSubmit={handleSubmit}\r\n      isValid={isValid}\r\n    />\r\n  );\r\n};\r\n\r\nexport default EditProfilePopup;\r\n","import React, { useEffect } from 'react';\r\nimport PopupWithForm from './PopupWithForm';\r\nimport { useFormWithValidation } from './../hooks/useFormWithValidation';\r\n\r\nconst EditAvatarPopup = function ({\r\n  isOpen,\r\n  onClose,\r\n  onScreenClickClose,\r\n  onUpdateAvatar,\r\n}) {\r\n  const {\r\n    values,\r\n    handleInputChange,\r\n    errors,\r\n    isValid,\r\n    resetForm,\r\n  } = useFormWithValidation();\r\n\r\n  useEffect(() => {\r\n    resetForm();\r\n  }, [isOpen, resetForm]);\r\n\r\n  const handleSubmit = (evt) => {\r\n    evt.preventDefault();\r\n\r\n    onUpdateAvatar({\r\n      avatar: values.link,\r\n    });\r\n  };\r\n\r\n  const markup = (\r\n    <fieldset className=\"popup__info\">\r\n      <label className=\"popup__form-field\">\r\n        <input\r\n          value={values.link || ''}\r\n          onChange={handleInputChange}\r\n          type=\"url\"\r\n          id=\"input-link\"\r\n          className=\"popup__input\"\r\n          name=\"link\"\r\n          placeholder=\"Ссылка на картинку\"\r\n          required\r\n        />\r\n        <span className=\"popup__error\" id=\"input-link-error\">\r\n          {errors.link || ''}\r\n        </span>\r\n      </label>\r\n    </fieldset>\r\n  );\r\n\r\n  return (\r\n    <PopupWithForm\r\n      title={'Обновить аватар'}\r\n      name={'update-avatar'}\r\n      buttonText={'Обновить'}\r\n      children={markup}\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n      onScreenClickClose={onScreenClickClose}\r\n      onSubmit={handleSubmit}\r\n      isValid={isValid}\r\n    />\r\n  );\r\n};\r\n\r\nexport default EditAvatarPopup;\r\n","import React, { useEffect } from 'react';\r\nimport PopupWithForm from './PopupWithForm';\r\nimport { useFormWithValidation } from './../hooks/useFormWithValidation';\r\n\r\nconst AddPlacePopup = ({ isOpen, onClose, onScreenClickClose, onAddPlace }) => {\r\n  const {\r\n    values,\r\n    handleInputChange,\r\n    errors,\r\n    isValid,\r\n    resetForm,\r\n  } = useFormWithValidation();\r\n\r\n  useEffect(() => {\r\n    resetForm();\r\n  }, [isOpen, resetForm]);\r\n\r\n  const handleSubmit = (evt) => {\r\n    evt.preventDefault();\r\n\r\n    onAddPlace({\r\n      name: values.place,\r\n      link: values.link,\r\n    });\r\n  };\r\n\r\n  const markup = (\r\n    <fieldset className=\"popup__info\">\r\n      <label className=\"popup__form-field\">\r\n        <input\r\n          value={values.place || ''}\r\n          onChange={handleInputChange}\r\n          type=\"text\"\r\n          id=\"place-input\"\r\n          className=\"popup__input\"\r\n          name=\"place\"\r\n          placeholder=\"Название\"\r\n          required\r\n          maxLength=\"30\"\r\n        />\r\n        <span className=\"popup__error\" id=\"place-input-error\">\r\n          {errors.place || ''}\r\n        </span>\r\n      </label>\r\n      <label className=\"popup__form-field\">\r\n        <input\r\n          value={values.link || ''}\r\n          onChange={handleInputChange}\r\n          type=\"url\"\r\n          id=\"link-input\"\r\n          className=\"popup__input\"\r\n          name=\"link\"\r\n          placeholder=\"Ссылка на картинку\"\r\n          required\r\n        />\r\n        <span className=\"popup__error\" id=\"link-input-error\">\r\n          {errors.link || ''}\r\n        </span>\r\n      </label>\r\n    </fieldset>\r\n  );\r\n\r\n  return (\r\n    <PopupWithForm\r\n      title={'Новое место'}\r\n      name={'add-card'}\r\n      buttonText={'Создать'}\r\n      children={markup}\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n      onScreenClickClose={onScreenClickClose}\r\n      onSubmit={handleSubmit}\r\n      isValid={isValid}\r\n    />\r\n  );\r\n};\r\n\r\nexport default AddPlacePopup;\r\n","import React from 'react';\r\nimport PopupWithForm from './PopupWithForm';\r\n\r\nconst ConfirmDeleteCardPopup = function ({\r\n  isOpen,\r\n  onClose,\r\n  onScreenClickClose,\r\n  onDeleteCard,\r\n  card,\r\n}) {\r\n  const handleSubmit = (evt) => {\r\n    evt.preventDefault();\r\n    onDeleteCard(card);\r\n  };\r\n\r\n  return (\r\n    <PopupWithForm\r\n      title={'Вы уверены?'}\r\n      name={'confirm'}\r\n      buttonText={'Да'}\r\n      children={null}\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n      onScreenClickClose={onScreenClickClose}\r\n      onSubmit={handleSubmit}\r\n      isValid={true}\r\n    />\r\n  );\r\n};\r\n\r\nexport default ConfirmDeleteCardPopup;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\n\r\nconst InfoTooltip = ({ isOpen, onClose, onScreenClickClose, isSuccessful }) => {\r\n  const modalElement = document.getElementById('modal');\r\n\r\n  return ReactDOM.createPortal(\r\n    <section\r\n      className={`popup popup_type_info-tooltip ${\r\n        isOpen ? 'popup_opened' : ''\r\n      }`}\r\n      onClick={onScreenClickClose}\r\n    >\r\n      <div className=\"popup__wrapper popup__wrapper_type_info-tooltip\">\r\n        <button className={'popup__close-button button'} onClick={onClose} />\r\n        <figure className=\"popup__img-container popup__img-container_type_info-tooltip\">\r\n          <div\r\n            className={`popup__circle ${\r\n              isSuccessful\r\n                ? 'popup__circle_type_accept'\r\n                : 'popup__circle_type_error'\r\n            }`}\r\n          ></div>\r\n          <figcaption className=\"popup__title-img popup__title-img_type_info-tooltip\">\r\n            {isSuccessful\r\n              ? 'Вы успешно зарегистрировались!'\r\n              : 'Что-то пошло не так! Попробуйте ещё раз.'}\r\n          </figcaption>\r\n        </figure>\r\n      </div>\r\n    </section>,\r\n    modalElement\r\n  );\r\n};\r\n\r\nexport default InfoTooltip;\r\n","class Api {\r\n  constructor({ baseUrl, headers }) {\r\n    this._baseUrl = baseUrl;\r\n    this._headers = headers;\r\n  }\r\n\r\n  /**\r\n   * Метод обработки ответа сервера\r\n   *\r\n   * @param  {Object} responce - объект ответа сервера\r\n   */\r\n  async _checkResponceStatus(responce) {\r\n    if (responce.ok) {\r\n      const json = await responce.json();\r\n      return json;\r\n    }\r\n    throw new Error(`Ошибка: ${responce.status} - ${responce.statusText}`);\r\n  }\r\n\r\n  /**\r\n   * Метод получения информации о пользователе с сервера\r\n   *\r\n   * @return {Object}\r\n   */\r\n  async getUserInfo() {\r\n    try {\r\n      const responce = await fetch(`${this._baseUrl}/users/me`, {\r\n        method: 'GET',\r\n        headers: this._headers,\r\n      });\r\n      //Дожидаемся ответа. Если функция вернет ошибку, выводим ее.\r\n      const data = await this._checkResponceStatus(responce);\r\n      return data;\r\n    } catch (error) {\r\n      console.error(error);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Метод получения карточек с сервера\r\n   *\r\n   * @return {Object}\r\n   */\r\n  async getInitialCards() {\r\n    try {\r\n      const responce = await fetch(`${this._baseUrl}/cards`, {\r\n        method: 'GET',\r\n        headers: this._headers,\r\n      });\r\n      const data = await this._checkResponceStatus(responce);\r\n      return data;\r\n    } catch (error) {\r\n      console.error(error);\r\n    }\r\n  }\r\n\r\n  async getValidInitialData() {\r\n    const initialData = await Promise.all([\r\n      this.getUserInfo(),\r\n      this.getInitialCards(),\r\n    ]);\r\n    return initialData;\r\n  }\r\n\r\n  async getAllInitialData() {\r\n    const initialData = await Promise.allSettled([\r\n      this.getUserInfo(),\r\n      this.getInitialCards(),\r\n    ]);\r\n    return initialData;\r\n  }\r\n\r\n  async setUserInfo({ name, about }) {\r\n    try {\r\n      const responce = await fetch(`${this._baseUrl}/users/me`, {\r\n        method: 'PATCH',\r\n        headers: this._headers,\r\n        body: JSON.stringify({\r\n          name,\r\n          about,\r\n        }),\r\n      });\r\n      const data = await this._checkResponceStatus(responce);\r\n      return data;\r\n    } catch (error) {\r\n      console.error(error);\r\n    }\r\n  }\r\n\r\n  async addCard({ name, link }) {\r\n    try {\r\n      const responce = await fetch(`${this._baseUrl}/cards`, {\r\n        method: 'POST',\r\n        headers: this._headers,\r\n        body: JSON.stringify({\r\n          name,\r\n          link,\r\n        }),\r\n      });\r\n      const data = await this._checkResponceStatus(responce);\r\n      return data;\r\n    } catch (error) {\r\n      console.error(error);\r\n    }\r\n  }\r\n\r\n  async deleteCard(cardId) {\r\n    try {\r\n      const responce = await fetch(`${this._baseUrl}/cards/${cardId}`, {\r\n        method: 'DELETE',\r\n        headers: this._headers,\r\n      });\r\n      const data = await this._checkResponceStatus(responce);\r\n      return data;\r\n    } catch (error) {\r\n      console.error(error);\r\n    }\r\n  }\r\n\r\n  async changeLikeCardStatus(cardId, methodHTTP) {\r\n    try {\r\n      const responce = await fetch(`${this._baseUrl}/cards/likes/${cardId}`, {\r\n        method: methodHTTP,\r\n        headers: this._headers,\r\n      });\r\n      const data = await this._checkResponceStatus(responce);\r\n      return data;\r\n    } catch (error) {\r\n      console.error(error);\r\n    }\r\n  }\r\n\r\n  async updateUserAvatar(avatar) {\r\n    try {\r\n      const responce = await fetch(`${this._baseUrl}/users/me/avatar`, {\r\n        method: 'PATCH',\r\n        headers: this._headers,\r\n        body: JSON.stringify({\r\n          avatar,\r\n        }),\r\n      });\r\n      const data = await this._checkResponceStatus(responce);\r\n      return data;\r\n    } catch (error) {\r\n      console.error(error);\r\n    }\r\n  }\r\n}\r\n\r\n//Экземпляр Api для осуществления запросов к серверу\r\nexport const api = new Api({\r\n  baseUrl: 'https://mesto.nomoreparties.co/v1/cohort-16',\r\n  headers: {\r\n    authorization: 'f1f27dcb-4c71-4cd5-a34d-2e8f5fd4811e',\r\n    'Content-Type': 'application/json',\r\n  },\r\n});\r\n","class Auth {\r\n  constructor({ baseUrl, headers }) {\r\n    this._baseUrl = baseUrl;\r\n    this._headers = headers;\r\n  }\r\n\r\n  _checkResponceStatus = async (res) => {\r\n    return res.ok ? res.json() : { error: `${res.status} - ${res.statusText}` };\r\n  };\r\n\r\n  register = async ({ password, email }) => {\r\n    try {\r\n      const res = await fetch(`${this._baseUrl}/signup`, {\r\n        method: 'POST',\r\n        headers: this._headers,\r\n        body: JSON.stringify({\r\n          password,\r\n          email,\r\n        }),\r\n      });\r\n      return this._checkResponceStatus(res);\r\n    } catch (err) {\r\n      console.error(`${err.name} - ${err.message}`);\r\n    }\r\n  };\r\n\r\n  authorize = async ({ password, email }) => {\r\n    try {\r\n      const res = await fetch(`${this._baseUrl}/signin`, {\r\n        method: 'POST',\r\n        headers: this._headers,\r\n        body: JSON.stringify({\r\n          password,\r\n          email,\r\n        }),\r\n      });\r\n      return this._checkResponceStatus(res);\r\n    } catch (err) {\r\n      console.error(`${err.name} - ${err.message}`);\r\n    }\r\n  };\r\n\r\n  checkToken = async ({ token }) => {\r\n    try {\r\n      const res = await fetch(`${this._baseUrl}/users/me`, {\r\n        method: 'GET',\r\n        headers: {\r\n          ...this._headers,\r\n          Authorization: `Bearer ${token}`,\r\n        },\r\n      });\r\n      return this._checkResponceStatus(res);\r\n    } catch (err) {\r\n      console.error(`${err.name} - ${err.message}`);\r\n    }\r\n  };\r\n}\r\n\r\nconst auth = new Auth({\r\n  baseUrl: 'https://auth.nomoreparties.co',\r\n  headers: {\r\n    'Content-Type': 'application/json',\r\n  },\r\n});\r\n\r\nexport { auth };\r\n","export default __webpack_public_path__ + \"static/media/profile__avatar.74c3c0fb.jpg\";","import React, { useState, useEffect } from 'react';\r\nimport { Route, Switch, useHistory } from 'react-router-dom';\r\nimport ProtectedRoute from '../hoc/ProtectedRoute';\r\nimport Header from './Header';\r\nimport Main from './Main';\r\nimport Footer from './Footer';\r\nimport Login from './Login';\r\nimport Register from './Register';\r\nimport ImagePopup from './ImagePopup';\r\nimport EditProfilePopup from './EditProfilePopup';\r\nimport EditAvatarPopup from './EditAvatarPopup';\r\nimport AddPlacePopup from './AddPlacePopup';\r\nimport ConfirmDeleteCardPopup from './ConfirmDeleteCardPopup';\r\nimport InfoTooltip from './InfoTooltip';\r\nimport { api } from '../utils/api';\r\nimport { auth } from '../utils/auth';\r\nimport { CurrentUserContext } from './../contexts/CurrentUserContext';\r\nimport avatarImg from './../images/profile__avatar.jpg';\r\nimport { JWT, signIn, signUp } from '../utils/constants';\r\n\r\nconst App = () => {\r\n  const [loggedIn, setLoggedIn] = useState(false);\r\n  const [authorizedUserData, setAuthorizedUserData] = useState(null);\r\n  const [isEditProfilePopupOpen, setEditProfilePopupOpen] = useState(false);\r\n  const [isAddPlacePopupOpen, setAddPlacePopupOpen] = useState(false);\r\n  const [isEditAvatarPopupOpen, setEditAvatarPopupOpen] = useState(false);\r\n  const [isConfirmPopupOpen, setConfirmPopupOpen] = useState(false);\r\n  const [isInfoTooltipPopup, setInfoTooltipPopup] = useState(false);\r\n  const [isSuccessfulRegistration, setSuccessfulRegistration] = useState(false);\r\n  const [selectedCard, setSelectedCard] = useState(null);\r\n  const [cards, setCards] = useState([]);\r\n  const [removableCard, setRemovableCard] = useState(null);\r\n\r\n  const history = useHistory();\r\n\r\n  //Дефолтная инициализация в случае невыполнения запроса к api.\r\n  const [currentUser, setCurrentUser] = useState({\r\n    avatar: avatarImg,\r\n    name: 'Name',\r\n    about: 'Information about you',\r\n  });\r\n\r\n  const handleInfoTooltipOpen = (isSuccessful) => {\r\n    setSuccessfulRegistration(isSuccessful);\r\n    setInfoTooltipPopup(true);\r\n  };\r\n\r\n  /**\r\n   * Обработчик открытия попапа редактирования профиля.\r\n   */\r\n  const handleEditProfileClick = () => {\r\n    setEditProfilePopupOpen(true);\r\n  };\r\n\r\n  /**\r\n   * Обработчик открытия попапа добавления карточки.\r\n   */\r\n  const handleAddPlaceClick = () => {\r\n    setAddPlacePopupOpen(true);\r\n  };\r\n\r\n  /**\r\n   * Обработчик открытия попапа редактирования аватара.\r\n   */\r\n  const handleEditAvatarClick = () => {\r\n    setEditAvatarPopupOpen(true);\r\n  };\r\n\r\n  /**\r\n   * Обработчик закрытия попапов.\r\n   */\r\n  const closeAllPopups = () => {\r\n    setEditProfilePopupOpen(false);\r\n    setAddPlacePopupOpen(false);\r\n    setEditAvatarPopupOpen(false);\r\n    setConfirmPopupOpen(false);\r\n    setInfoTooltipPopup(false);\r\n    setSelectedCard(null);\r\n  };\r\n\r\n  const handleScreenClickClose = ({ target }) => {\r\n    if (target.classList.contains('popup')) {\r\n      closeAllPopups();\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Обработчик клика по карточке.\r\n   */\r\n  const handleCardClick = (card) => {\r\n    setSelectedCard(card);\r\n  };\r\n\r\n  const handleDeleteButtonClick = (card) => {\r\n    setConfirmPopupOpen(true);\r\n    setRemovableCard(card);\r\n  };\r\n\r\n  const handleUpdateUser = async ({ name, about }) => {\r\n    try {\r\n      const res = await api.setUserInfo({ name, about });\r\n      if (res) {\r\n        setCurrentUser(res);\r\n      }\r\n    } catch (err) {\r\n      console.error(err);\r\n    } finally {\r\n      closeAllPopups();\r\n    }\r\n  };\r\n\r\n  const handleUpdateAvatar = async ({ avatar }) => {\r\n    try {\r\n      const res = await api.updateUserAvatar(avatar);\r\n      if (res) {\r\n        setCurrentUser(res);\r\n      }\r\n    } catch (err) {\r\n      console.error(err);\r\n    } finally {\r\n      closeAllPopups();\r\n    }\r\n  };\r\n\r\n  const handleCardLike = async (card) => {\r\n    const isLiked = card.likes.some((like) => currentUser._id === like._id);\r\n\r\n    try {\r\n      const newCard = await api.changeLikeCardStatus(\r\n        card._id,\r\n        isLiked ? 'DELETE' : 'PUT'\r\n      );\r\n      if (newCard) {\r\n        const newCards = cards.map((currentCard) =>\r\n          currentCard._id === card._id ? newCard : currentCard\r\n        );\r\n        setCards(newCards);\r\n      }\r\n    } catch (err) {\r\n      console.error(err);\r\n    } finally {\r\n      closeAllPopups();\r\n    }\r\n  };\r\n\r\n  const handleCardDelete = async (card) => {\r\n    try {\r\n      await api.deleteCard(card._id);\r\n      closeAllPopups();\r\n\r\n      const newCards = cards.filter(\r\n        (currentCard) => currentCard._id !== card._id\r\n      );\r\n\r\n      setCards(newCards);\r\n    } catch (err) {\r\n      console.error(err);\r\n    }\r\n  };\r\n\r\n  const handleAddPlaceSubmit = async ({ name, link }) => {\r\n    try {\r\n      const newCard = await api.addCard({ name, link });\r\n      closeAllPopups();\r\n\r\n      if (newCard) {\r\n        setCards([newCard, ...cards]);\r\n      }\r\n    } catch (err) {\r\n      console.error(err);\r\n    }\r\n  };\r\n\r\n  const handleAuthorization = async ({ password, email }) => {\r\n    try {\r\n      const data = await auth.authorize({ password, email });\r\n      if (!data.hasOwnProperty('error')) {\r\n        setLoggedIn(true);\r\n        localStorage.setItem(JWT, data.token);\r\n        history.push('/');\r\n      }\r\n    } catch (err) {\r\n      console.error(err);\r\n    }\r\n  };\r\n\r\n  const handleRegistration = async ({ password, email }) => {\r\n    try {\r\n      const data = await auth.register({ password, email });\r\n\r\n      if (data.hasOwnProperty('error')) {\r\n        handleInfoTooltipOpen(false);\r\n      } else {\r\n        history.push(signIn);\r\n        handleInfoTooltipOpen(true);\r\n      }\r\n    } catch (err) {\r\n      console.error(err);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    const jwt = localStorage.getItem(JWT);\r\n\r\n    const fetchData = async () => {\r\n      try {\r\n        const { data } = await auth.checkToken({\r\n          token: localStorage.getItem(JWT),\r\n        });\r\n        if (data) {\r\n          setLoggedIn(true);\r\n          setAuthorizedUserData(data);\r\n          history.push('/');\r\n        }\r\n      } catch (err) {\r\n        console.error(err);\r\n      }\r\n    };\r\n\r\n    if (jwt) {\r\n      fetchData();\r\n    }\r\n  }, []);\r\n\r\n  /**\r\n   * Отрисовка первоначальных данных при монтировании компонента.\r\n   * (Promise.allSettled)\r\n   */\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      try {\r\n        const dataArray = await api.getAllInitialData();\r\n        const [dataUser, dataCards] = dataArray.map((item) => item.value);\r\n\r\n        if (dataUser) {\r\n          setCurrentUser(dataUser);\r\n        }\r\n\r\n        if (dataCards) {\r\n          setCards(dataCards);\r\n        }\r\n      } catch (err) {\r\n        console.error(err);\r\n      }\r\n    };\r\n\r\n    fetchData();\r\n  }, []);\r\n\r\n  //Обработчик закрытия попапа по клику на Escape\r\n  useEffect(() => {\r\n    const handleEscClickClose = (evt) => {\r\n      if (evt.key === 'Escape') {\r\n        closeAllPopups();\r\n      }\r\n    };\r\n\r\n    document.addEventListener('keydown', handleEscClickClose);\r\n\r\n    return () => {\r\n      document.removeEventListener('keydown', handleEscClickClose);\r\n    };\r\n  }, []);\r\n\r\n  return (\r\n    <CurrentUserContext.Provider value={currentUser}>\r\n      <div className=\"App\">\r\n        <div className=\"page\">\r\n          <Header\r\n            loggedIn={loggedIn}\r\n            setLoggedIn={setLoggedIn}\r\n            data={authorizedUserData}\r\n          />\r\n          <Switch>\r\n            <Route path={signIn}>\r\n              <Login onAuthorization={handleAuthorization} />\r\n            </Route>\r\n            <Route path={signUp}>\r\n              <Register onRegistration={handleRegistration} />\r\n            </Route>\r\n            <ProtectedRoute\r\n              component={Main}\r\n              loggedIn={loggedIn}\r\n              path=\"/\"\r\n              onEditProfile={handleEditProfileClick}\r\n              onAddPlace={handleAddPlaceClick}\r\n              onEditAvatar={handleEditAvatarClick}\r\n              onCardClick={handleCardClick}\r\n              onDeleteButtonClick={handleDeleteButtonClick}\r\n              cards={cards}\r\n              onCardLike={handleCardLike}\r\n            />\r\n          </Switch>\r\n          <Footer />\r\n          <EditProfilePopup\r\n            isOpen={isEditProfilePopupOpen}\r\n            onClose={closeAllPopups}\r\n            onScreenClickClose={handleScreenClickClose}\r\n            onUpdateUser={handleUpdateUser}\r\n          />\r\n          <EditAvatarPopup\r\n            isOpen={isEditAvatarPopupOpen}\r\n            onClose={closeAllPopups}\r\n            onScreenClickClose={handleScreenClickClose}\r\n            onUpdateAvatar={handleUpdateAvatar}\r\n          />\r\n          <AddPlacePopup\r\n            isOpen={isAddPlacePopupOpen}\r\n            onClose={closeAllPopups}\r\n            onScreenClickClose={handleScreenClickClose}\r\n            onAddPlace={handleAddPlaceSubmit}\r\n          />\r\n          <ConfirmDeleteCardPopup\r\n            isOpen={isConfirmPopupOpen}\r\n            onClose={closeAllPopups}\r\n            onScreenClickClose={handleScreenClickClose}\r\n            onDeleteCard={handleCardDelete}\r\n            card={removableCard}\r\n          />\r\n          <ImagePopup\r\n            card={selectedCard}\r\n            onClose={closeAllPopups}\r\n            onScreenClickClose={handleScreenClickClose}\r\n          />\r\n          <InfoTooltip\r\n            isOpen={isInfoTooltipPopup}\r\n            onClose={closeAllPopups}\r\n            onScreenClickClose={handleScreenClickClose}\r\n            isSuccessful={isSuccessfulRegistration}\r\n          />\r\n        </div>\r\n      </div>\r\n    </CurrentUserContext.Provider>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { BrowserRouter as Router } from 'react-router-dom';\r\nimport App from './components/App';\r\nimport './index.css';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <Router basename=\"/react-mesto-auth\">\r\n      <App />\r\n    </Router>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n"],"sourceRoot":""}